webpackJsonp([7],{"/MUd":function(e,t){},"/Ost":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"face"},[a("ul",e._l(e.aFace,function(t){return a("li",{key:t},[a("img",{attrs:{src:e.imgHttp+"public/vendor/layui/images/face/"+t+".gif",alt:""},on:{click:function(t){t.stopPropagation(),e.getImage(t)}}})])}))])},s=[],i={render:n,staticRenderFns:s};t.a=i},"0H8t":function(e,t){},"13DI":function(e,t,a){"use strict";function n(e){var t=this;v=e;var n=v,s=n.vue,i=n.listen_route,o=n.port,c=n.avatar,m=n.name,g=n.uid,p=n.store_id,w=n.is_ssl;h=new WebSocket(u(w)+":"+i+":"+o),h.onopen=function(){h.send(f()({name:m,avatar:c,origin:r()?"pc":"phone",store_id:p,uid:g,type:"login",user_type:"service"}))},h.onclose=function(){},h.onmessage=function(e){var n=JSON.parse(e.data);switch(n.message_type){case"come":if(n.uid===v.user.user_id)break;break;case"leave":if(n.uid===v.user_id||""!==n.uid)break;break;case"init":n.msg&&(t.status=1);break;case"come_msg":s.comeMessage(n);break;case"come_wait":s.comeWait(n);break;case"robbed":case"user_robbed":case"uoffline":case"close_link":break;case"others_login":d()({title:"提示",message:"您已被强迫下线！",cancelButtonText:"退出登录",confirmButtonText:"强制登录",showConfirmButton:!0,showCancelButton:!0,closeOnClickModal:!1}).then(function(e){"cancel"===e?a.i(l.b)({router:v.vue.$router,ws:!0}):window.location.reload()})}}}function s(e){var t=e.msg,a=e.uid,n=e.goods_id;return!(!t||""===t||v==={}||""===v.uid||void 0===v.uid)&&(h.send(f()({avatar:v.avatar,goods_id:n,msg:t,origin:r()?"pc":"phone",store_id:v.store_id,to_id:a,type:"sendmsg"})),{avatar:v.avatar,name:v.name})}function i(){h.close()}function o(e){var t=e.goods_id,a=e.uid,n=e.store_id;h.send(f()({from_id:v.uid,goods_id:t,msg:a,store_id:n,to_id:null,type:"info"}))}function r(){for(var e=navigator.userAgent,t=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],a=!0,n=0;n<t.length;n++)if(e.indexOf(t[n])>0){a=!1;break}return a}function u(e){return e?"wss":"ws"}a.d(t,"b",function(){return n}),a.d(t,"a",function(){return i}),a.d(t,"c",function(){return s}),a.d(t,"d",function(){return o});var c=a("wf+Q"),m=(a.n(c),a("DKk0")),d=a.n(m),g=a("3SZ7"),f=a.n(g),l=a("Pi6f"),h=null,v=null},"6CWX":function(e,t,a){"use strict";function n(e){a("0H8t")}var s=a("WlzN"),i=a("vgqP"),o=a("mPyB"),r=n,u=o(s.a,i.a,!1,r,null,null);t.a=u.exports},"95zI":function(e,t){},"9ctm":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("keep-alive",[e.$route.meta.notKeepAlive?e._e():a("router-view",{key:e.$route.fullPath,staticClass:"app-view"})],1),e._v(" "),e.$route.meta.notKeepAlive?a("router-view",{key:e.$route.fullPath,staticClass:"app-view"}):e._e(),e._v(" "),a("chat-footer"),e._v(" "),a("chat-message-footer"),e._v("\n  "+e._s(e.pageTransitionName)+"\n")],1)},s=[],i={render:n,staticRenderFns:s};t.a=i},Bj5D:function(e,t,a){"use strict";var n=a("34v0"),s=a.n(n),i=a("/mv4");t.a={name:"face",data:function(){return{}},created:function(){this.getImageFiles()},computed:s()({},a.i(i.a)(["aFace"]),{imgHttp:function(){return window.ROOT_URL?window.ROOT_URL:window.imgHttp+"/dsc/mobile/"}}),methods:s()({},a.i(i.b)(["getImageFiles","showFaceDialog"]),{getImage:function(e){this.$emit("add-face",e.srcElement.outerHTML),this.showFaceDialog({bShow:!1})}})}},BwjS:function(e,t,a){"use strict";function n(e){a("95zI")}var s=a("Lkob"),i=a("xJqV"),o=a("mPyB"),r=n,u=o(s.a,i.a,!1,r,"data-v-1c4d3757",null);t.a=u.exports},"CA1/":function(e,t){},E4I4:function(e,t){},IcnI:function(e,t,a){"use strict";var n,s=a("WxFH"),i=a.n(s),o=a("Xu2r"),r=a("KEcs"),u=a("/mv4"),c=a("VAhz");r.default.use(u.c);var m={needPageTransition:!1,pageTransitionName:"",historyPageScrollTop:{},aFace:[],bFace:!1},d={saveScrollTop:function(e,t){var a=e.commit,n=t.path,s=t.scrollTop;a(o.a,{path:n,scrollTop:s})},getImageFiles:function(e){(0,e.commit)(o.b)},showFaceDialog:function(e,t){var a=e.commit,n=t.bShow;a(o.c,{bShow:n})}},g=(n={},i()(n,o.d,function(e,t){var a=t.pageTransitionName;e.pageTransitionName=a}),i()(n,o.a,function(e,t){var a=t.path,n=t.scrollTop;e.historyPageScrollTop[a]=n}),i()(n,o.b,function(e){for(var t=0;t<71;t++)e.aFace.push(t)}),i()(n,o.c,function(e,t){var a=t.bShow;e.bFace=void 0===a?!e.bFace:a}),n);t.a=new u.c.Store({state:m,actions:d,mutations:g,modules:{namespaced:!0,chat:c.a},strict:!1})},Kkag:function(e,t,a){"use strict";var n=a("UIuv"),s=a.n(n),i=a("KEcs"),o=a("xY2u"),r=a.n(o),u=a("Pi6f"),c=localStorage.getItem("token");r.a.defaults.headers.common.token=c||"",r.a.interceptors.request.use(function(e){return e},function(e){return s.a.reject(e)}),r.a.interceptors.response.use(function(e){return 1===e.data.code&&"用户登录已失效"===e.data.message&&(localStorage.removeItem("token"),localStorage.getItem("token")&&(u.b({router:null}),window.router.push("/chat/login")),window.router.push("/chat/login")),e},function(e){return s.a.reject(e)}),i.default.prototype.$http=r.a},Lkob:function(e,t,a){"use strict";var n=a("34v0"),s=a.n(n),i=a("/mv4"),o=a("qkow"),r=a("Tgor");t.a={name:"chat-footer",data:function(){return{message:"",num:0}},components:{EcButton:o.a,Face:r.a},computed:s()({},a.i(i.a)("chat/messageBottomInput",["show"]),a.i(i.a)(["bFace"])),methods:s()({},a.i(i.b)("chat",["sendMessage"]),a.i(i.b)(["showFaceDialog"]),{addFace:function(e){this.message+=e,this.$el.querySelector(".input").innerHTML+=e},scrollShow:function(){var e=this.$el.querySelector(".input");setTimeout(function(){e.scrollIntoViewIfNeeded()},400)},changMessage:function(e){this.message=e.srcElement.innerHTML},thisSendMessage:function(e){this.sendMessage(e),this.message="",this.$el.querySelector(".input").innerHTML="",this.$el.querySelector(".input").focus()}})}},M93x:function(e,t,a){"use strict";function n(e){a("CA1/")}var s=a("dYPY"),i=a("9ctm"),o=a("mPyB"),r=n,u=o(s.a,i.a,!1,r,null,null);t.a=u.exports},MrDs:function(e,t,a){"use strict";var n=a("dbJu"),s=a.n(n),i=a("HFN4"),o=a.n(i),r=a("Zw+j"),u=new r.a,c=function(){function e(){s()(this,e)}return o()(e,[{key:"messageNew",value:function(e){var t=u.updateImageTag(e);return u.delHtmlTag(t)}}]),e}();t.a=c},MxVq:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("KEcs"),s=a("M93x"),i=a("YaEn"),o=a("IcnI");a("kBzv");n.default.config.productionTip=!1,new n.default({el:"#app",router:i.a,store:o.a,template:"<App/>",components:{App:s.a}})},"P/30":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement;return(e._self._c||t)("button",{staticClass:"ec-button"},[e._v("\n  "+e._s(e.text)+"\n")])},s=[],i={render:n,staticRenderFns:s};t.a=i},Pi6f:function(e,t,a){"use strict";function n(){return _.a.post(window.requestUrl("chat&c=adminp"))}function s(){return _.a.get(window.requestUrl("chat&c=adminp&a=visit"))}function i(e){var t=e.id,a=e.sid,n=e.type,s=e.page,i=e.defaults;return _.a.post(window.requestUrl("chat&c=adminp&a=chatlist"),I.a.stringify({type:n||void 0,page:s||void 0,default:i||void 0,user_id:t,store_id:a}))}function o(e){var t=e.username,a=e.password,n=e.vue;p.a.open(),_.a.post(window.requestUrl("chat&c=login"),I.a.stringify({username:t,password:a})).then(function(e){var t=e.data,a=t.code,s=t.msg,i=t.token;p.a.close(),l()({message:s,position:"middle",iconClass:1===a?"iconfont icon-error":"iconfont icon-success",duration:1600}),0===a&&(localStorage.setItem("token",i),_.a.defaults.headers.common.token=i||"",n.$router.push({path:n.$route.query.redirect||"/chat"}),d(n))})}function r(){return _.a.post(window.requestUrl("chat&c=adminp&a=serviceinfo"))}function u(e){var t=e.router,a=e.ws;p.a.open(),a||L.a(),_.a.get(window.requestUrl("chat&c=adminp&a=logout")).then(function(e){var a=e.data,n=a.message,s=a.code;if(p.a.close(),l()({message:n,position:"middle",duration:2e3}),0===s){localStorage.getItem("token")&&localStorage.removeItem("token"),t&&t.push({path:"/chat/login"}),window.location.reload()}})}function c(e){var t=e.userId;return _.a.get(window.requestUrl("chat&c=adminp&a=changemessagestatus&id="+t))}function m(e){var t=e.goodsId;return _.a.post(window.requestUrl("chat&c=adminp&a=goodsinfo"),I.a.stringify({gid:t}))}function d(e){_.a.post(window.requestUrl("chat&c=adminp&a=initinfo")).then(function(t){var a=t.data,n=a.code,s=(a.message,a.data);0===n&&(e.setAvigatorNumber({chatNum:s.chat_num,waitNum:s.wait_num}),L.b({vue:e,listen_route:s.listen_route,port:s.port,avatar:s.avatar,name:s.user_name,uid:s.user_id,store_id:s.store_id,is_ssl:s.is_ssl}))})}a.d(t,"d",function(){return n}),a.d(t,"e",function(){return s}),a.d(t,"f",function(){return i}),a.d(t,"c",function(){return m}),a.d(t,"i",function(){return o}),a.d(t,"a",function(){return d}),a.d(t,"h",function(){return r}),a.d(t,"g",function(){return c}),a.d(t,"b",function(){return u});var g=a("E4I4"),f=(a.n(g),a("owsk")),l=a.n(f),h=a("MxVq"),v=(a.n(h),a("Ng52")),p=a.n(v),w=a("xY2u"),_=a.n(w),b=a("TOsV"),I=a.n(b),L=a("13DI")},Tgor:function(e,t,a){"use strict";function n(e){a("zAGP")}var s=a("Bj5D"),i=a("/Ost"),o=a("mPyB"),r=n,u=o(s.a,i.a,!1,r,"data-v-61ee7498",null);t.a=u.exports},TzQJ:function(e,t){},VAhz:function(e,t,a){"use strict";var n,s,i,o=a("Sxqw"),r=a.n(o),u=a("Hmpo"),c=a.n(u),m=a("E4I4"),d=(a.n(m),a("owsk")),g=a.n(d),f=a("MxVq"),l=(a.n(f),a("Ng52")),h=a.n(l),v=a("vYJH"),p=a.n(v),w=a("WxFH"),_=a.n(w),b=a("Edqs"),I=a.n(b),L=a("34v0"),y=a.n(L),k=a("Xu2r"),N=a("Bo74"),S=a("Pi6f"),x=a("lM2f"),M=a("13DI"),P={},T={setAvigatorNumber:function(e,t){(0,e.commit)(k.e,t)},comeMessage:function(e,t){var a=e.commit,n=e.rootState,s=e.state,i=s.message.messageList[t.from_id];t.goods_id&&i&&Number(i.goodsId)!==Number(t.goods_id)?S.c({goodsId:t.goods_id}).then(function(e){var s=e.data,i=s.code,o=s.goods_info;0===i&&a(k.f,{info:t,rootState:n,goodsInfo:o})}):a(k.f,{info:t,rootState:n}),a(k.g,{info:t,time:t.time})},comeWait:function(e,t){(0,e.commit)(k.h,{info:t})},sendMessage:function(e,t){var n=e.commit,s=e.rootState,i=(e.dispatch,a.i(x.a)(new Date,"hh:mm:ss"));if(t.msg||""!==t.msg){var o=a.i(M.c)({msg:t.msg,uid:t.uid,goods_id:t.goods_id}),r=o.avatar,u=o.name;n(k.i,{info:t,avatar:r,name:u,time:i,rootState:s}),n(k.g,{info:t,time:i,send:!0})}},insertInfo:function(e,t){var n=e.commit;a.i(M.d)(t),n(k.j,{customerId:t.uid})}},q=(n={},_()(n,k.e,function(e,t){var a=t.chatNum,n=t.waitNum;e.bottomNavigator.navs[0].number=a,e.bottomNavigator.navs[1].number=n}),_()(n,k.f,function(e,t){var a=t.info,n=t.rootState,s=t.goodsInfo;n.chat.message.bScroll=!0;var i=e.message.messageList[a.from_id];i&&(i.list.push({add_time:a.time,avatar:a.avatar,name:a.name,status:a.status,service_id:a.to_id,message:a.message,user_type:"2"}),s&&(i.goodsId=s.goods_id,i.list.push(y()({user_type:0},s))),e.message.messageList=I()({},e.message.messageList))}),_()(n,k.h,function(e,t){for(var a=t.info,n=e.visitor.visitorList.length,s=!1,i=0;i<n;i++)if(Number(e.visitor.visitorList[i].fid)===Number(a.from_id)){s=!0,e.visitor.visitorList[i].add_time=a.time,e.visitor.visitorList[i].message=a.message,e.visitor.visitorList[i].message_list.unshift(a.message),e.visitor.visitorList[i].num++,e.bottomNavigator.navs[1].number++;break}s||(e.visitor.visitorList.unshift({user_name:a.name,add_time:a.time,avatar:a.avatar,customer_id:a.from_id,goods_id:a.goods_id,message:a.message,message_list:[a.message],num:1,origin:a.origin,store_id:a.store_id}),e.bottomNavigator.navs[1].number++)}),_()(n,k.i,function(e,t){var a=t.info,n=t.avatar,s=t.time,i=t.name;t.rootState.chat.message.bScroll=!0,e.message.messageList.hasOwnProperty(a.uid)&&(e.message.messageList[a.uid].list.push({avatar:n||"",message:a.msg,add_time:s,user_type:"1",name:i}),e.message.messageList=I()({},e.message.messageList))}),_()(n,k.g,function(e,t){for(var a=t.info,n=t.time,s=t.send,i=e.dialogue.dialogueList.length,o=a.uid||a.from_id,r=a.msg||a.message,u=0;u<i;u++)if(Number(e.dialogue.dialogueList[u].customer_id)===Number(o)){if(e.dialogue.dialogueList[u].message instanceof Array)e.dialogue.dialogueList[u].message.unshift(r);else{var c=[e.dialogue.dialogueList[u].message];c.unshift(r),e.dialogue.dialogueList[u].message=c}e.dialogue.dialogueList[u].add_time=n,s||(e.dialogue.dialogueList[u].message_sum?e.dialogue.dialogueList[u].message_sum++:N.a.set(e.dialogue.dialogueList[u],"message_sum",1),e.bottomNavigator.navs[0].number++);break}}),_()(n,k.j,function(e,t){for(var a=t.customerId,n=e.visitor.visitorList.length,s=0,i=0;i<n;i++){Number(e.visitor.visitorList[i].customer_id)===Number(a)&&(s=e.visitor.visitorList[i].num,e.visitor.visitorList.splice(i,1));break}e.bottomNavigator.navs[1].number-=s}),n),F={};t.a={namespaced:!0,state:P,mutations:q,actions:T,getters:F,modules:{bottomNavigator:{namespaced:!0,state:{show:!1,navs:[{name:"dialogue",icon:"message",text:"对话",number:0,active:!0,route:{name:"chat/dialogue",path:"/chat/dialogue"}},{name:"visitor",icon:"visitors",text:"访客",number:0,active:!1,route:{name:"chat/visitor",path:"/chat/visitor"}},{name:"setting",icon:"setting",text:"设置",active:!1,route:{name:"chat/setting",path:"/chat/setting"}}]},actions:{activateChatFooterName:function(e,t){(0,e.commit)(k.k,t)},showBottomNav:function(e,t){(0,e.commit)(k.l,t)}},mutations:(s={},_()(s,k.k,function(e,t){e.navs=e.navs.map(function(e){return e.active=e.name===t,e})}),_()(s,k.l,function(e,t){e.show=t}),s)},dialogue:{namespaced:!0,state:{dialogueList:[]},actions:{getDialogueList:function(e,t){var a=e.commit;S.d().then(function(e){var t=e.data,n=(t.code,t.message_list),s=[];if(n instanceof Array)s=n;else for(var i in n)s.push(n[i]);a(k.m,s)})}},mutations:_()({},k.m,function(e,t){e.dialogueList=t})},visitor:{namespaced:!0,state:{visitorList:[]},actions:{getVisitorList:function(e,t){var a=e.commit;e.rootState;S.e().then(function(e){var t=e.data;0===t.code&&a(k.n,{visitorList:t.visit_list})})}},mutations:_()({},k.n,function(e,t){var a=t.visitorList;e.visitorList=a})},message:{namespaced:!0,state:{bScroll:!1,messageId:-1,messageList:{}},getters:{message:function(e){if(e.messageList[e.messageId])return e.messageList[e.messageId].list},page:function(e){if(e.messageList[e.messageId])return e.messageList[e.messageId].page}},actions:{setMessageId:function(e,t){var a=e.commit,n=t.messageId;a(k.o,{messageId:n})},setMessageList:function(e,t){var a=this,n=e.dispatch,s=e.commit,i=e.state;return p()(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!i.messageList.hasOwnProperty(t.id)||"default"!==t.type){e.next=2;break}return e.abrupt("return",!1);case 2:if("default"!==t.type){e.next=6;break}n("setMessageId",{messageId:t.id}),e.next=8;break;case 6:return e.next=8,n("changePage");case 8:h.a.open({text:"加载中..."}),S.f({id:t.id,sid:t.sid,type:t.type,defaults:t.defaults,page:t.page}).then(function(e){var a=e.data,n=a.code,i=a.message_list,o=a.goods;if(h.a.close(),0===n){var r=i.length,u=[];if(r>0)for(var c=r-1;c>=0;c--)u.push(i[c]);s(k.p,{messageId:t.id,messageList:u,type:t.type,goods:o})}else g()("没有更多了……")});case 10:case"end":return e.stop()}},e,a)}))()},changeToRead:function(e,t){var a=e.commit,n=e.rootState,s=t.userId;S.g({userId:s}).then(function(){a(k.q,{rootState:n,userId:s})})},changePage:function(e){var t=this,a=e.commit;return p()(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a(k.r);case 1:case"end":return e.stop()}},e,t)}))()}},mutations:(i={},_()(i,k.o,function(e,t){var a=t.messageId;e.messageId=a}),_()(i,k.p,function(e,t){var a=t.messageId,n=t.messageList,s=t.type,i=t.goods;if(e.bScroll=!1,"default"===s)N.a.set(e.messageList,a,{page:1,list:n,goodsId:i?i.goods_id:0}),e.messageList[a].list.push(y()({user_type:0},i));else{var o;(o=e.messageList[a].list).unshift.apply(o,r()(n)),e.messageList=I()({},e.messageList)}}),_()(i,k.q,function(e,t){for(var a=t.rootState,n=t.userId,s=a.chat.dialogue.dialogueList.length,i=0,o=0;o<s;o++)if(0!==a.chat.dialogue.dialogueList[o].message_sum&&Number(a.chat.dialogue.dialogueList[o].customer_id)===Number(n)){i=a.chat.dialogue.dialogueList[o].message_sum||0,a.chat.dialogue.dialogueList[o].message_sum=0,a.chat.dialogue=I()({},a.chat.dialogue),a.chat.bottomNavigator.navs[0].number-=i;break}}),_()(i,k.r,function(e){e.messageList[e.messageId].page++}),i)},messageBottomInput:{namespaced:!0,state:{show:!1},actions:{showMessageInput:function(e,t){(0,e.commit)(k.s,t)}},mutations:_()({},k.s,function(e,t){e.show=t})},settingInfo:{namespaced:!0,state:{userInfo:{image:"",name:"",fit:""},account:""},actions:{getSettingInfo:function(e){var t=e.commit;h.a.open({text:"加载中..."}),S.h().then(function(e){var a=e.data,n=a.data;0===a.code&&(t(k.t,n),h.a.close())})}},mutations:_()({},k.t,function(e,t){e.userInfo.name=t.nick_name,e.userInfo.image=t.service_avatar,e.account=t.user_name})}}}},WlzN:function(e,t,a){"use strict";t.a={name:"badge",props:{number:{type:Number}}}},Xu2r:function(e,t,a){"use strict";a.d(t,"d",function(){return n}),a.d(t,"a",function(){return s}),a.d(t,"e",function(){return i}),a.d(t,"b",function(){return o}),a.d(t,"c",function(){return r}),a.d(t,"j",function(){return u}),a.d(t,"f",function(){return c}),a.d(t,"h",function(){return m}),a.d(t,"i",function(){return d}),a.d(t,"g",function(){return g}),a.d(t,"k",function(){return f}),a.d(t,"l",function(){return l}),a.d(t,"s",function(){return h}),a.d(t,"m",function(){return v}),a.d(t,"n",function(){return p}),a.d(t,"t",function(){return w}),a.d(t,"o",function(){return _}),a.d(t,"p",function(){return b}),a.d(t,"q",function(){return I}),a.d(t,"r",function(){return L});var n="setPageTransitionName",s="saveScrollTop",i="setNavigatorNumber",o="getImageFiles",r="showFaceDialog",u="chat/insertInfo",c="chat/comeMessage",m="chat/comeWait",d="chat/sendMessage",g="chat/newDialogue",f="chat/activateChatFooterNav",l="chat/showBottomNav",h="chat/showMessageInput",v="chat/getDialogueList",p="chat/getVisitorList",w="setting/getSettingInfo",_="message/setMessageId",b="message/setMessageList",I="message/changeToRead",L="message/changePage"},YaEn:function(e,t,a){"use strict";function n(e,t){if(e.name&&-1!==p.indexOf(e.name))return _.length=0,!1;if(t.name&&-1!==p.indexOf(t.name))return _.push(e.fullPath),!0;if(e.name&&-1!==w.indexOf(e.name))return _.push(e.fullPath),!0;var a=_.indexOf(e.fullPath);return-1!==a?(_.length=a+1,!1):(_.push(e.fullPath),!0)}var s=a("E4I4"),i=(a.n(s),a("owsk")),o=a.n(i),r=a("Xu2r"),u=a("KEcs"),c=a("dNqC"),m=function(){return a.e(2).then(a.bind(null,"nt9Z"))},d=function(){return a.e(1).then(a.bind(null,"WHOy"))},g=function(){return a.e(0).then(a.bind(null,"osDW"))},f=function(){return a.e(3).then(a.bind(null,"RdYp"))},l=function(){return a.e(5).then(a.bind(null,"QGR8"))},h=function(){return a.e(4).then(a.bind(null,"cTYd"))};u.default.use(c.a);var v=new c.a({mode:"hash",routes:[{path:"/",name:"",component:m,meta:{requiresAuth:!0}},{path:"/chat",name:"chat",component:m,meta:{requiresAuth:!0}},{path:"/chat/dialogue",name:"chat/dialogue",component:m,meta:{requiresAuth:!0}},{path:"/chat/visitor",name:"chat/visitor",component:d,meta:{requiresAuth:!0}},{path:"/chat/setting",name:"chat/setting",component:g,meta:{requiresAuth:!0}},{path:"/chat/message",name:"chat/message",component:f,meta:{notKeepAlive:!0,requiresAuth:!0}},{path:"/chat/login",name:"chat/login",component:l},{path:"/chat/update/password",name:"chat/update/password",component:h,meta:{requiresAuth:!0}}]});v.beforeEach(function(e,t,a){if("chat/message"===t.name&&"chat/login"===e.name&&v.push("/chat"),v.app.$store){if(v.app.$store.state.needPageTransition){var s=n(e,t)?"slide-left":"slide-right";v.app.$store.commit(r.d,{pageTransitionName:s})}}else n(e,t);if(e.matched.some(function(e){return e.meta.requiresAuth})){localStorage.getItem("token")?a():(o()({message:"请登录后进行操作",position:"middle",duration:1600}),a({path:"/chat/login",query:{redirect:e.fullPath}}))}else a()});var p=["chat/dialogue"],w=[],_=[];window.router=v,t.a=v},"Zw+j":function(e,t,a){"use strict";var n=a("dbJu"),s=a.n(n),i=a("HFN4"),o=a.n(i),r=function(){function e(){s()(this,e)}return o()(e,[{key:"delHtmlTag",value:function(e){return e.replace(/<[^>]+>/g,"")}},{key:"updateImageTag",value:function(e){return e.replace(/<img [^>]*src=['"][^'"]+[^>]*>/g,"[图片]")}}]),e}();t.a=r},clLD:function(e,t,a){"use strict";function n(e){a("TzQJ")}var s=a("jMQu"),i=a("pWVn"),o=a("mPyB"),r=n,u=o(s.a,i.a,!1,r,"data-v-116f8816",null);t.a=u.exports},dYPY:function(e,t,a){"use strict";var n=a("34v0"),s=a.n(n),i=a("/mv4"),o=a("clLD"),r=a("BwjS"),u=a("Pi6f");t.a={name:"app",components:{ChatFooter:o.a,ChatMessageFooter:r.a},created:function(){localStorage.getItem("token")&&u.a(this)},computed:s()({},a.i(i.a)(["pageTransitionName"])),methods:s()({},a.i(i.b)("chat",["comeMessage","comeWait","setAvigatorNumber"]))}},"ej/X":function(e,t,a){"use strict";t.a={name:"ec-button",props:{text:{required:!0,type:String}}}},jMQu:function(e,t,a){"use strict";var n=a("34v0"),s=a.n(n),i=a("/mv4"),o=a("6CWX");t.a={name:"chat-footer",components:{Badge:o.a},computed:s()({},a.i(i.a)("chat/bottomNavigator",["show","navs"]))}},kBzv:function(e,t,a){"use strict";var n=a("KEcs"),s=(a("Kkag"),a("MrDs")),i=new s.a;window.requestUrl=function(e){return window.ROOT_URL?window.ROOT_URL+"index.php?m="+e:"http://10.10.10.145/dsc/index.php?m="+e};var o=["chat/message"];n.default.mixin({beforeRouteEnter:function(e,t,a){a(function(t){-1===o.indexOf(e.name)&&(t.$el.scrollTop=t.$store.state.historyPageScrollTop[e.fullPath]||0)})},beforeRouteLeave:function(e,t,a){-1===o.indexOf(t.name)&&this.$store.dispatch("saveScrollTop",{path:t.fullPath,scrollTop:this.$el.scrollTop}),a()}}),n.default.prototype.release=!0,window.imgHttp=n.default.prototype.release?"":"http://10.10.10.145",n.default.filter("messageNew",i.messageNew)},lM2f:function(e,t,a){"use strict";function n(e,t){var a=function(e){return e+="",e.replace(/^(\d)$/,"0$1")},n={yyyy:e.getFullYear(),yy:e.getFullYear().toString().substring(2),M:e.getMonth()+1,MM:a(e.getMonth()+1),d:e.getDate(),dd:a(e.getDate()),hh:e.getHours(),mm:e.getMinutes(),ss:e.getSeconds()};return t||(t="yyyy-MM-dd hh:mm:ss"),t.replace(/([a-z])(\1)*/gi,function(e){return n[e]})}a.d(t,"a",function(){return n})},pWVn:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("footer",{directives:[{name:"show",rawName:"v-show",value:e.show&&e.navs.length,expression:"show && navs.length"}],staticClass:"chat-footer"},[a("ul",e._l(e.navs,function(t){return a("router-link",{key:t.name,class:{active:t.active},attrs:{to:t.route.path,tag:"li"}},[a("badge",{directives:[{name:"show",rawName:"v-show",value:t.number,expression:"item.number"}],attrs:{number:t.number}}),e._v(" "),a("i",{staticClass:"iconfont",class:"icon-"+t.icon}),e._v(" "),a("label",{attrs:{for:""}},[e._v(e._s(t.text))])],1)}))])},s=[],i={render:n,staticRenderFns:s};t.a=i},qkow:function(e,t,a){"use strict";function n(e){a("/MUd")}var s=a("ej/X"),i=a("P/30"),o=a("mPyB"),r=n,u=o(s.a,i.a,!1,r,null,null);t.a=u.exports},qssg:function(e,t){},vgqP:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement;return(e._self._c||t)("em",{staticClass:"badge"},[e._v("\n  "+e._s(e.number)+"\n")])},s=[],i={render:n,staticRenderFns:s};t.a=i},"wf+Q":function(e,t){},xJqV:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("footer",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"message-footer",on:{click:function(t){e.showFaceDialog({bShow:!1})}}},[a("transition",{attrs:{name:"fade"}},[a("keep-alive",[e.bFace?a("face",{on:{"add-face":e.addFace}}):e._e()],1)],1),e._v(" "),a("div",{staticClass:"left"},[a("i",{staticClass:"iconfont icon-expression",on:{click:function(t){t.stopPropagation(),e.showFaceDialog(t)}}})]),e._v(" "),a("div",{staticClass:"input",attrs:{contenteditable:"true"},on:{input:e.changMessage,click:e.scrollShow}}),e._v(" "),a("ec-button",{attrs:{text:"发送"},nativeOn:{click:function(t){e.thisSendMessage({msg:e.message,uid:e.$route.query.id,goods_id:e.$route.query.goods_id})}}})],1)},s=[],i={render:n,staticRenderFns:s};t.a=i},zAGP:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.js.map